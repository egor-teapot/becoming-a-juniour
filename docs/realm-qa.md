# Источники
- https://www.mongodb.com/docs/realm/sdk/node/
- https://www.mongodb.com/docs/realm-sdks/js/latest/

# Realm db вопрос - ответ

## что такое realm
Realm это встраиваемая(embedded) NoSql база данных.
Realm хранит данные в формате BSON(Binary JSON).
Realm не использует SQL для создания запросов,
и не имеет возможности создавать отношения между
сущностями на прямую.

<br>

## Как хранятся данные в realm
В realm данные делятся на коллекции(реалмы)
состоящии из гетерогенных обьектов.
Из-за особенностей realm некоторые обьекты
могут иметь больше параметров чем другие,
для realm вполне нормально что может существовать
два обьекта абсолютно отличающиеся по структуре,
при этом принадлежащие к одной коллекции.
> Гетерогенный - неоднородный по своему составу или происхождению.

Для тех кто знаком с MySQL представляете коллекции как
таблицы(сущьности) в которых наличие каждого столбца у строки
зависит от того хотите ли вы чтоб он был или нет.

Для создания обьекта в realm вам необходимо создать "схему"
этого обьекта на основе которой будет происходить запись в 
коллекцию, она может выглядить следующим образом
```
const User = {
    name: "User", // <- название коллекции
    properties: {
        name: "string",
        likes: "string"
    }
}
```

## Как фильтровать данные коллекций
Для фильтрации данных используется .filtered()
который принемает запрос в формате строки.
В запросе работают логические операторы, есть возможность
использовать переменные поставив перед словом $
оно будет считатся переменной которая будет пратся
ис списка оргументов после запроса
```
.filtered("name = $name", name)
```

Тоже самое можно сделать использовав интерполяцию
```
.filtered(`name = ${name}`)
```

<!-- ## какими двумя способами можно работать с realm
К realm можно подключится синхронно или асинхронно,
синхронное работает ООП, а асинхронное через ФП

Синхронное - работа с базой данных прерывает
работу программы, однако при ошибке или незапланированным
отключением от бд уменьшает вероятность повреждения
данных

Асинхронное - работа с базой данных не прерывает
работу программы, ошибка может вызвать повреждение данных,
однако этот способ является наиболее желательным так как
значительно улучшает опыт пользователя

Стоит заметить, что при подключении одним способом
невозможно подключится к бд другим способом -->

## как подключится к realm

Создание бд
```
const realm = Realm.open({path: "realm.db", schema: [Schema]})
```

## как подключится асинхронно к realm используя функцию
Здесь уже немного интереснее, в синхронном подключении
для создания соединения с бд мы делали через 'new',
этот медод из сферы ООП, тоесть переменная которой
мы присваиваем Realm.open() посути является наследником
класса Realm и всех его методов.

Подключаясь к realm следующим образом
```
Realm.open({path: "realm.db", schema: [Schema]})
```
мы получаем функцию которая возвращает базу данных,
таким образом нам будет необходимо работать в возвращаемыми
данными этой функции через .then() .cathc()

Это будет выглядить так
```
Realm.open({path: "realm/db", schema: [User]})
    .then(realm => console.log(JSON.stringify(realm.objects("User"))))
```

Это можно упростить создав функцию для инициализации бд
```
const realm = async () => {
    return Realm.open({path: "realm/db", schema: [User]})
}

// проверяем получилось ли подключится
realm().then(realm => console.log(JSON.stringify(realm.objects("User"))))
```

## как получить все элемениы конкретной схемы
```

```